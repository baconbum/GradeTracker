BEGIN;

CREATE TABLE IF NOT EXISTS Students(
	ID				INTEGER	PRIMARY KEY	NOT NULL,
	FirstName		TEXT,
	LastName		TEXT
);


CREATE TABLE IF NOT EXISTS Courses(
	ID				INTEGER	PRIMARY KEY	NOT NULL,
	Name			TEXT,
	StartDate		DATETIME,
	EndDate			DATETIME
);

CREATE TABLE IF NOT EXISTS GradeableTasks(
	ID				INTEGER	PRIMARY KEY	NOT NULL,
	CourseID		INTEGER,
	Name			TEXT,
	PotentialMarks	REAL,
	Weight			REAL,
	FOREIGN KEY(CourseID)	REFERENCES Courses(ID)
);

CREATE TABLE IF NOT EXISTS StudentCourses(
	StudentID		INTEGER,
	CourseID		INTEGER,
	FOREIGN KEY(StudentID)	REFERENCES Students(ID),
	FOREIGN KEY(CourseID)	REFERENCES Courses(ID),
	PRIMARY KEY(StudentID, CourseID)
);

CREATE TABLE IF NOT EXISTS StudentGradeableTasks(
	StudentID		INTEGER,
	GradeableTaskID	INTEGER,
	EarnedMarks		REAL,
	NoMark			BOOLEAN,
	FOREIGN KEY(StudentID)			REFERENCES Students(ID),
	FOREIGN KEY(GradeableTaskID)	REFERENCES GradeableTasks(ID),
	PRIMARY KEY(StudentID, GradeableTaskID)
);

COMMIT;